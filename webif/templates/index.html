{% extends "base_plugin.html" %}
{% set tabcount = 2 %}
{% set tab1title = _('Viessmann Items') %}
{% set tab2title = _('Aktive Datenpunkte') %}
{% set language = p.get_sh().get_defaultlanguage() %}
{% if language not in ['en','de'] %}
{% set language = 'en' %}
{% endif %}

{% block headtable %}
<table class="table table-striped table-hover">
	<tbody>
		<tr>
			<td class="py-1"><strong>Serieller Port</strong></td>
			<td class="py-1">{{ p._serialport }}</td>
			<td class="py-1" width="50px"></td>
			<td class="py-1"><strong>Anzahl Items</strong></td>
			<td class="py-1">{{ p._params|length }}</td>
			<td class="py-1" width="50px"></td>
		</tr>
		<tr>
			<td class="py-1"><strong>Heizungstyp</strong></td>
			<td class="py-1">{{ p._heating_type }}</td>
			<td></td>
			<td class="py-1"><strong>Verbunden</strong></td>
			<td class="py-1">{{ p._connected }}</td>
			<td></td>
		</tr>
		<tr>
			<td class="py-1"><strong>Protokoll</strong></td>
			<td class="py-1">{{ p._protocol }}</td>
			<td></td>
			<td class="py-1"><strong>Verbindung aktiv</strong></td>
			<td class="py-1">{{ p._initialized }}</td>
			<td></td>
		</tr>
	</tbody>
</table>
{% endblock headtable %}

{% block bodytab1 %}
<div class="table-responsive" style="margin-left: 2px; margin-right: 2px;" class="row">
	<div class="col-sm-12">
		{% if p._params|length %}
		    <table class="table table-striped table-hover">
			    <tr>
			    	<th>{{ _('Item') }}</th>
			    	<th>{{ _('Datenpunkt') }}</th>
			    	<th>{{ _('Befehlsname') }}</th>
			    	<th>{{ _('Typ') }}</th>
			    	<th>{{ _('Wert') }}</th>
			    	<th>{{ _('Letzte Aktualisierung') }}</th>
			    </tr>
			    {% for commandcode in p._params %}
			        <tr>
			            <td>{{ p._params[commandcode]['item'].path() }}</td>
			            <td>{{ commandcode }}</td>
			            <td>{{ p._params[commandcode]['commandname'] }}</td>
			            <td>{{ p._params[commandcode]['item'].type() }}</td>
			            <td>{{ p._params[commandcode]['item']() }}</td>
			            <td>{{ p._params[commandcode]['item'].last_update() }}</td>
			        </tr>
			    {% endfor %}
		    </table>
		{% endif %}
	</div>
</div>
{% endblock bodytab1 %}

{% block bodytab2 %}
<div class="table-responsive" style="margin-left: 2px; margin-right: 2px;" class="row">
	<div class="col-sm-12">
		{% if p._params|length %}
		    <table class="table table-striped table-hover">
			    <tr>
			    	<th>{{ _('Datenpunkt') }}</th>
			    	<th>{{ _('Befehlsname') }}</th>
			    	<th>{{ _('Item') }}</th>
			    	<th>{{ _('Wert') }}</th>
			    	<th>{{ _('Letzte Aktualisierung') }}</th>
			   	</tr>
			    {% for commandcode in p._params %}
			        <tr>
			            <td>{{ commandcode }}</td>
			            <td>{{ p._params[commandcode]['commandname'] }}</td>
			            <td>{{ p._params[commandcode]['item'].path() }}</td>
			            <td>{{ p._params[commandcode]['item']() }}</td>
			            <td>{{ p._params[commandcode]['item'].last_update() }}</td>
			        </tr>
			    {% endfor %}
		    </table>
		{% endif %}
	</div>
</div>
{% endblock bodytab2 %}
